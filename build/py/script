set -e # Exit on error

function find_module_dirs() {
  for dir in $(find . -type d)
  do
    if [[ ${dir} == \.\/\.* ]] ||
       [[ ${dir} == \.\/build* ]] ||
       [[ ${dir} == *__pycache__* ]]
    then
      continue
    fi
    echo ${dir}
  done
}

for dir in $(find_module_dirs)
do
  touch ${dir}/__init__.py
done

if ! which nosetests
then
  echo "nosetests" not found
fi

if ! which nosetests3
then
  echo "nosetests3" not found
fi

nosetests3
